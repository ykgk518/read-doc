

# 素晴らしいソフトウェアを作り上げる
ソフトウェアシステムを構築する際に正しく行わなければならないことはたくさんある。

アーキテクチャはそれらを結びつけて、成功のための基盤を提供する。

アーキテクチャとは品質特性を満たすためにソフトウェアをどう構成するか、ということに対する設計判断の集合

アーキテクチャを設計することによって以下の恩恵が受けれる。

* 大きな問題をより小さく、より管理しやすい問題へと変える
* 協働の仕方を示す
  * ソフトウェア開発は技術であると同時に人間的なコミュニケーションであること
  * ソフトウェア開発を進める上で、どのように一緒に働くかを考えるのはかなり重要
* 複雑な問題について会話するための語彙を提供
  * アーキテクチャ(要素と構造と関係性)の考えや中核語彙を使うと良い
* 機能以外の物に目を向けれる
  * コストや制約、スケジュール、リスク、チーム、品質特性に目を向けれる
* 後に起きる大きな問題を発見することができる
* 変化への柔軟な対応を可能にする

# ソフトウェアの基本構造
ソフトウェアには構造があって、構造は**要素**と別の**要素**を**関係**を築く

例えば、要素はクラス、パッケージ、レイヤー、オブジェクト、プロセス、サーバなど
関係の例は「〜を使用する」、「〜に依存する」、「〜を呼び出す」、「〜の上で実行する」 など

# 品質特性とは



# 設計のマインドセット
* 理解
  * 積極的に情報を集めて、問題を説明してもらうように働きかける
  * 要求を理解すること
  * 何が必要なのか
* 探求
  * 望み通りの品質特性を最もうまく促進させる組み合わせが見つかるまで、構造の組み合わせ・選択肢を試し続ける
  * 最適な組み合わせを見つけるには、パターン、技術、開発方法を調査しよう
* 作成
  * デザインされたコンセプトを形にすること
  * モデルを作成したり、プロトタイプ、ドキュメント、計算したりしてアーキテクチャを形をする
* 評価
  * 基準に従って設計判断が妥当かどうか判断する
  * すべてなし、すべてあり、だけではなく、一部を評価することもできる

これらを効果的には行うには**素早い**フィードバックループをもったプロセスが必要。


# 戦略を立てる

# 設計
要求の分析と要求に対するモデリングが完了したらコーディングやテストの前にやるべきアクションが存在する。

4種の設計モデル
* コンポーネント設計
  * アーキテクチャの構成要素を関係性とともに示す
* インタフェース設計
  * 情報(データや制御、処理など)の流れや具体的な振る舞いを定義
  * 利用シナリオや振る舞いのモデルから定義されることが大半
* アーキテクチャ設計
  * ソフウェアの主要な構成要素の関係を定義
  * システムが要求を満たすために利用するパターン、実現手法の制約を定義
* データ設計・クラス設計
  * CRCモデルで定義したオブジェクトやその関係性および属性をもとに具体的な設計クラスに変換


設計時に行う決定は、最終的にソフトウェアの構築が成功するかどうかに影響する。 
また、同じくらい重要なのが、容易に保守できるソフトウェアになるかどうかにも影響する点である。 


# モデルで複雑さを扱う
コードを書く前に構造を整理しよう
- どんな要素(クラス、モジュール)が必要?
- それらはどう繋がる?
- より良い名前は？
- 要求や求められている概念は何かを漏れなく明確に
  - 5W1Hを使おう
  - 制約を必ず聞く・考える
  - 「なぜ」を聞く


# パターンの土台を身につける
* レイヤーパターン
  * ある関心事のまとまりに沿って整理された、個別の独立したレイヤー群にコードを分割
  * すべてのモジュールは1つのレイヤーにのみ割り当てられている
  * 上位レイヤーは下位レイヤーを使用することができるかが、この関係は一方通行。循環依存はなし
  * 保守性、移植性、再利用性、テスト容易性、修正変更性を促進
  * レイヤーが多すぎるか、抽象が漏れすぎると、開発者が困難
* ポートとアダプター
  * 核となるビジネスロジックを分離する
  * よくあるのが外部システム(バックエンドAPI、ストレージ)の実装を分離
* パイプとフィルター
* サービス志向アーキテクチャ
* 共有データ
* イベント駆動
  * パブリッシュ・サブスクライバー
  * イベントストリーミング
  * イベントソーシング
  * メッセージキュー

# データ設計

# インタフェース設計
インタフェース設計は、システムへ入出力する情報の流れや、アーキテクチャを構成するコンポーネント同士がどのように情報をやりとりするのか表現する。 

インタフェース設計の3種類の要素
* UI
* 外部インタフェース
* 内部インタフェース

## 外部インタフェース
システムに対して情報を送受信するエンティティ(データの種類、値、意味など)の正確な情報を集めることが必要。

要求、やりたいことに対して必要な情報に対して、過不足ないか矛盾がないかなど検証が必要。

検証は情報が得られた時に行うこと。

## 内部インタフェース
コンポーネント、クラス、関数（フック）同士のやりとりや協調動作に必要な操作がもれなく表現すること。

操作に求められる機能要件を満たすこと。


# 設計判断を可視化する

アイデアを共有すること。

抽象的なアイデアについて話す必要がある場合は、スケッチを始めること。

図はきれいである必要はない。

設計をタンジブルにする（＝設計を目に見える形で整理し、誰でもわかりやすく共有できるようにする）アクティビティ
* 要素責務ビュー
* アーキテクチャデシジョンレコード
* コンテキスト図
* 品質特性ビュー
* シーケンス図
* 状態遷移図
* データフロー図
* etc




# 潜在的な解決策を探る
* CRCカード
  * 目的  
    * 会話のツール
    * 責務と依存の明確化
  * 流れ
    * クラス、モジュール、コンポーネントを洗い出す
    * 責務を割り当てる
    * 協力関係を考える
    * シナリオを試す
      * カードを並べて、頭の中でシナリオを追う
      * 「このクラスは次にどうする?」と自問自答or議論
    * 改善


# SOLIDの原則(WIP)
---
